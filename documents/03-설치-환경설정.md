# ğŸ“¦ ì„¤ì¹˜ ë° í™˜ê²½ì„¤ì • ê°€ì´ë“œ

## 1. ê°œë°œ í™˜ê²½ ìš”êµ¬ì‚¬í•­

### 1.1 í•„ìˆ˜ ì†Œí”„íŠ¸ì›¨ì–´

| ì†Œí”„íŠ¸ì›¨ì–´ | ìµœì†Œ ë²„ì „ | ê¶Œì¥ ë²„ì „ | ìš©ë„                     |
| ---------- | --------- | --------- | ------------------------ |
| Node.js    | 18.0.0    | 20.x LTS  | JavaScript ëŸ°íƒ€ì„        |
| Yarn       | 1.22.0    | Latest    | íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €            |
| PostgreSQL | 13.0      | 15.x      | ë°ì´í„°ë² ì´ìŠ¤ (ë¡œì»¬ ê°œë°œ) |
| Git        | 2.0       | Latest    | ë²„ì „ ê´€ë¦¬                |
| VS Code    | -         | Latest    | ì½”ë“œ ì—ë””í„° (ì„ íƒì‚¬í•­)   |

### 1.2 ì¶”ê°€ ë„êµ¬

- **ngrok**: Instagram OAuth ê°œë°œ ì‹œ HTTPS í„°ë„ë§ìš©
- **Postman/Insomnia**: API í…ŒìŠ¤íŠ¸ìš© (ì„ íƒì‚¬í•­)
- **TablePlus/DBeaver**: DB ê´€ë¦¬ ë„êµ¬ (ì„ íƒì‚¬í•­)

## 2. í”„ë¡œì íŠ¸ ì„¤ì¹˜

### 2.1 ì €ì¥ì†Œ í´ë¡ 

```bash
# GitHubì—ì„œ í”„ë¡œì íŠ¸ í´ë¡ 
git clone https://github.com/yohbzblab/Picker.git
cd Picker/instacrawl

# í˜„ì¬ ë¸Œëœì¹˜ í™•ì¸
git branch

# dev ë¸Œëœì¹˜ë¡œ ì „í™˜
git checkout dev
```

### 2.2 ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# Yarnì„ ì‚¬ìš©í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
yarn install

# ë˜ëŠ” npm ì‚¬ìš© (ê¶Œì¥í•˜ì§€ ì•ŠìŒ)
npm install
```

### 2.3 Prisma ì„¤ì •

```bash
# Prisma í´ë¼ì´ì–¸íŠ¸ ìƒì„±
yarn prisma generate

# ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë™ê¸°í™”
yarn prisma db push

# Prisma Studio ì‹¤í–‰ (DB ê´€ë¦¬ GUI)
yarn prisma studio
```

## 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### 3.1 .env íŒŒì¼ ìƒì„±

```bash
# ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— .env íŒŒì¼ ìƒì„±
cp .env.example .env
```

### 3.2 í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜

```env
# ====================
# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
# ====================
DATABASE_URL="postgresql://username:password@localhost:5432/instacrawl?schema=public"

# ====================
# Supabase ì„¤ì •
# ====================
# Supabase í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œì—ì„œ í™•ì¸
NEXT_PUBLIC_SUPABASE_URL="https://[PROJECT_ID].supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJ..."

# ====================
# ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
# ====================
# ê°œë°œ: http://localhost:3001 ë˜ëŠ” ngrok URL
# í”„ë¡œë•ì…˜: ì‹¤ì œ ë„ë©”ì¸
NEXT_PUBLIC_APP_URL="http://localhost:3001"

# ====================
# Instagram API ì„¤ì • (ì„ íƒì‚¬í•­, ì¶”í›„ì— êµ¬í˜„)
# ====================
# Meta for Developersì—ì„œ ìƒì„±
INSTAGRAM_APP_ID="your_instagram_app_id"
INSTAGRAM_APP_SECRET="your_instagram_app_secret"
NEXT_PUBLIC_INSTAGRAM_REDIRECT_URI="http://localhost:3001/api/instagram/callback"

# ====================
# ì´ë©”ì¼ ì„œë¹„ìŠ¤ ì„¤ì • (ì„ íƒì‚¬í•­)
# ====================
# ì‚¬ìš©ìë³„ë¡œ Settings í˜ì´ì§€ì—ì„œ ì„¤ì • ê°€ëŠ¥
```

### 3.3 í™˜ê²½ ë³€ìˆ˜ ê²€ì¦

```bash
# í™˜ê²½ ë³€ìˆ˜ê°€ ì œëŒ€ë¡œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
node -e "console.log('DB:', process.env.DATABASE_URL ? 'âœ“' : 'âœ—')"
node -e "console.log('Supabase URL:', process.env.NEXT_PUBLIC_SUPABASE_URL ? 'âœ“' : 'âœ—')"
```

## 4. ì™¸ë¶€ ì„œë¹„ìŠ¤ ì„¤ì •

### 4.1 Supabase ì„¤ì •

#### 4.1.1 í”„ë¡œì íŠ¸ ìƒì„±

1. [Supabase](https://supabase.com) ì ‘ì†
2. "New Project" í´ë¦­
3. í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥:
   - Project Name: `instacrawl`
   - Database Password: ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
   - Region: ê°€ì¥ ê°€ê¹Œìš´ ì§€ì—­ ì„ íƒ (Seoul)

#### 4.1.2 Google OAuth ì„¤ì •

1. Supabase Dashboard â†’ Authentication â†’ Providers
2. Google í™œì„±í™”
3. Google Cloud Consoleì—ì„œ:
   ```
   - ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± ë˜ëŠ” ê¸°ì¡´ í”„ë¡œì íŠ¸ ì„ íƒ
   - APIs & Services â†’ Credentials â†’ Create Credentials â†’ OAuth 2.0
   - Authorized redirect URIs ì¶”ê°€:
     https://[PROJECT_ID].supabase.co/auth/v1/callback
   ```
4. Client IDì™€ Secretì„ Supabaseì— ì…ë ¥

#### 4.1.3 Storage ë²„í‚· ìƒì„±

1. Supabase Dashboard â†’ Storage
2. "New Bucket" í´ë¦­:
   - Name: `email-attachments`
   - Public: true (ë˜ëŠ” falseë¡œ ì„¤ì • í›„ ì •ì±… êµ¬ì„±)
3. ì •ì±… ì„¤ì •:

   ```sql
   -- ëª¨ë“  ì‚¬ìš©ìê°€ ì½ê¸° ê°€ëŠ¥
   CREATE POLICY "Public read access" ON storage.objects
   FOR SELECT USING (bucket_id = 'email-attachments');

   -- ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì—…ë¡œë“œ ê°€ëŠ¥
   CREATE POLICY "Authenticated users can upload" ON storage.objects
   FOR INSERT WITH CHECK (auth.uid() IS NOT NULL);
   ```

### 4.2 PostgreSQL ë¡œì»¬ ì„¤ì • (Supabase ëŒ€ì‹  ë¡œì»¬ DB ì‚¬ìš© ì‹œ)

#### 4.2.1 PostgreSQL ì„¤ì¹˜

```bash
# macOS (Homebrew)
brew install postgresql
brew services start postgresql

# Ubuntu/Debian
sudo apt-get install postgresql postgresql-contrib
sudo systemctl start postgresql

# Windows
# PostgreSQL ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ì„¤ì¹˜ í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ
```

#### 4.2.2 ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±

```bash
# PostgreSQL ì ‘ì†
psql -U postgres

# ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
CREATE DATABASE instacrawl;

# ì‚¬ìš©ì ìƒì„± (ì„ íƒì‚¬í•­)
CREATE USER instacrawl_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE instacrawl TO instacrawl_user;

# ì¢…ë£Œ
\q
```

#### 4.2.3 DATABASE_URL ì—…ë°ì´íŠ¸

```env
DATABASE_URL="postgresql://postgres:password@localhost:5432/instacrawl?schema=public"
```

### 4.3 Instagram API ì„¤ì • (ì„ íƒì‚¬í•­)

#### 4.3.1 Meta for Developers ì„¤ì •

1. [Meta for Developers](https://developers.facebook.com) ì ‘ì†
2. My Apps â†’ Create App
3. App Type: Business ì„ íƒ
4. ê¸°ë³¸ ì •ë³´ ì…ë ¥

#### 4.3.2 Instagram Basic Display ì¶”ê°€

1. Dashboard â†’ Add Product â†’ Instagram Basic Display
2. Settings êµ¬ì„±:
   - Valid OAuth Redirect URIs: `http://localhost:3001/api/instagram/callback`
   - Deauthorize Callback URL: `http://localhost:3001/api/instagram/deauth`
   - Data Deletion Request URL: `http://localhost:3001/api/instagram/delete`

#### 4.3.3 í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ì¶”ê°€

1. Roles â†’ Instagram Testers
2. Add Instagram Testers
3. í…ŒìŠ¤í„° ìŠ¹ì¸ (Instagram ì„¤ì •ì—ì„œ)

### 4.4 ì´ë©”ì¼ ì„œë¹„ìŠ¤ ì„¤ì •

#### 4.4.1 Gmail SMTP ì„¤ì •

1. Google ê³„ì • ì„¤ì •:
   - 2ë‹¨ê³„ ì¸ì¦ í™œì„±í™”
   - [ì•± ë¹„ë°€ë²ˆí˜¸ ìƒì„±](https://myaccount.google.com/apppasswords)
2. Settings í˜ì´ì§€ì—ì„œ ì…ë ¥:
   ```
   SMTP Host: smtp.gmail.com
   SMTP Port: 587
   SMTP User: your-email@gmail.com
   SMTP Password: ìƒì„±í•œ ì•± ë¹„ë°€ë²ˆí˜¸
   ```

#### 4.4.2 MailPlug ì„¤ì • (í•œêµ­ ê¸°ì—… ì´ë©”ì¼)

1. MailPlug ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì†
2. SMTP ì„¤ì • í™•ì¸:
   ```
   SMTP Host: smtp.mailplug.co.kr
   SMTP Port: 465
   SMTP User: ì´ë©”ì¼ ì£¼ì†Œ
   SMTP Password: ì´ë©”ì¼ ë¹„ë°€ë²ˆí˜¸
   ```

## 5. ê°œë°œ ì„œë²„ ì‹¤í–‰

### 5.1 ê¸°ë³¸ ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„ ì‹œì‘ (í¬íŠ¸ 3001)
yarn dev

# ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†
http://localhost:3001
```

### 5.2 ngrok í„°ë„ë§ (Instagram OAuth í…ŒìŠ¤íŠ¸ìš©)

```bash
# ë³„ë„ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰
ngrok http 3001

# ìƒì„±ëœ HTTPS URL í™•ì¸
# ì˜ˆ: https://abc123.ngrok-free.app

# .env íŒŒì¼ ì—…ë°ì´íŠ¸
NEXT_PUBLIC_APP_URL="https://abc123.ngrok-free.app"
NEXT_PUBLIC_INSTAGRAM_REDIRECT_URI="https://abc123.ngrok-free.app/api/instagram/callback"
```

### 5.3 ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬

```bash
# Prisma Studio ì‹¤í–‰ (GUI)
yarn prisma studio

# ìŠ¤í‚¤ë§ˆ ë³€ê²½ í›„ ë§ˆì´ê·¸ë ˆì´ì…˜
yarn prisma migrate dev --name describe_your_change

# ìŠ¤í‚¤ë§ˆ ë³€ê²½ í›„ í´ë¼ì´ì–¸íŠ¸ ì¬ìƒì„±
yarn prisma generate
```

## 6. ì´ˆê¸° ì„¤ì • ë° í…ŒìŠ¤íŠ¸

### 6.1 ì²« ë¡œê·¸ì¸

1. http://localhost:3001 ì ‘ì†
2. "Sign in with Google" í´ë¦­
3. Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
4. ìë™ìœ¼ë¡œ ì‚¬ìš©ì ìƒì„± ë° ëŒ€ì‹œë³´ë“œ ë¦¬ë‹¤ì´ë ‰íŠ¸

### 6.2 í”„ë¡œí•„ ì™„ì„±

1. Settings í˜ì´ì§€ ì´ë™
2. í•„ìˆ˜ ì •ë³´ ì…ë ¥:
   - Brand Name (ë¸Œëœë“œëª…)
   - Sender Name (ë°œì‹ ìëª…)
3. ì´ë©”ì¼ ì„¤ì •:
   - Gmail ë˜ëŠ” MailPlug ì„ íƒ
   - SMTP ì •ë³´ ì…ë ¥
   - "Test Connection" í´ë¦­

## 7. ë¬¸ì œ í•´ê²°

### 7.1 ì¼ë°˜ì ì¸ ë¬¸ì œ

#### Prisma í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜

```bash
# ì˜¤ë¥˜: Cannot find module '@/app/generated/prisma'
# í•´ê²°:
yarn prisma generate
```

#### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜

```bash
# ì˜¤ë¥˜: P1001: Can't reach database server
# í•´ê²°:
# 1. PostgreSQL ì„œë¹„ìŠ¤ í™•ì¸
sudo systemctl status postgresql

# 2. DATABASE_URL í™•ì¸
echo $DATABASE_URL

# 3. ì—°ê²° í…ŒìŠ¤íŠ¸
psql $DATABASE_URL
```

#### Supabase ì¸ì¦ ì˜¤ë¥˜

```bash
# ì˜¤ë¥˜: Invalid API key
# í•´ê²°:
# 1. Supabase Dashboardì—ì„œ API í‚¤ ì¬í™•ì¸
# 2. .env íŒŒì¼ì˜ NEXT_PUBLIC_SUPABASE_ANON_KEY í™•ì¸
# 3. ì„œë²„ ì¬ì‹œì‘
```

---

_ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-01-08_
