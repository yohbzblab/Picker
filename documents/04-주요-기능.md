# 💡 주요 기능 설명서

## 1. 사용자 인증 시스템

### 1.1 개요

Supabase Auth를 기반으로 한 안전하고 간편한 인증 시스템

### 1.2 주요 기능

#### Google OAuth 로그인

```javascript
// 로그인 플로우
1. 로그인 페이지에서 "Sign in with Google" 클릭
2. Google 계정 선택 및 권한 승인
3. Supabase가 세션 생성 및 JWT 토큰 발급
4. AuthProvider가 사용자 정보 DB 동기화
5. 대시보드로 자동 리다이렉트
```

#### 자동 세션 관리

- 세션 만료 시 자동 갱신
- 브라우저 쿠키에 안전하게 토큰 저장
- 로그아웃 시 모든 세션 정보 삭제

### 1.3 사용자 프로필 관리

#### 프로필 정보

- **기본 정보**: 이름, 이메일, 프로필 이미지
- **브랜드 정보**: 브랜드명, 발신자명
- **이메일 설정**: Gmail/MailPlug SMTP 정보

#### 설정 페이지 (`/settings`)

```
Settings
├── Profile (프로필 정보 수정)
├── Email Provider (이메일 서비스 선택)
├── SMTP Configuration (SMTP 설정)
└── Connected Accounts (연결된 계정 관리)
```

### 1.4 보안 기능

- HTTPS 전용 통신
- CSRF 보호
- XSS 방지
- SQL Injection 방지 (Prisma ORM)

## 2. 인플루언서 관리 시스템

### 2.1 개요

동적 필드 시스템을 통한 유연한 인플루언서 정보 관리

### 2.2 인플루언서 필드 관리

- 컬럼에 타입을 입히고,

#### 기본 제공 필드

| 필드명     | 타입       | 설명                     |
| ---------- | ---------- | ------------------------ |
| accountId  | TEXT       | 인스타그램 계정 ID       |
| name       | TEXT       | 인플루언서 이름          |
| email      | EMAIL      | 이메일 주소              |
| phone      | PHONE      | 전화번호                 |
| category   | SELECT     | 카테고리 (패션, 뷰티 등) |
| followers  | NUMBER     | 팔로워 수                |
| engagement | PERCENTAGE | 참여율                   |

#### 커스텀 필드 추가

```javascript
// 관리자가 추가 가능한 필드 타입
- TEXT: 짧은 텍스트
- LONG_TEXT: 긴 텍스트
- NUMBER: 숫자
- URL: 웹사이트 주소
- EMAIL: 이메일
- PHONE: 전화번호
- BOOLEAN: 예/아니오
- SELECT: 단일 선택
- MULTI_SELECT: 다중 선택
- TAGS: 태그
- DATE: 날짜
- CURRENCY: 금액
- PERCENTAGE: 백분율
- RATING: 평점
```

### 2.3 인플루언서 CRUD 작업

#### 인플루언서 추가

1. "Add Influencer" 버튼 클릭
2. 필수 필드 입력
3. 선택적 필드 입력
4. 저장

#### 인플루언서 수정

1. 인플루언서 목록에서 수정 아이콘 클릭
2. 정보 수정
3. 변경사항 저장

#### 인플루언서 삭제

1. 인플루언서 선택
2. 삭제 버튼 클릭
3. 확인 팝업에서 "Delete" 클릭

### 2.4 인플루언서 검색 및 필터

#### 검색 기능

- 이름, 이메일, 계정 ID로 검색
- 실시간 검색 결과 업데이트

#### 필터링

- 카테고리별 필터
- 팔로워 수 범위
- 참여율 범위
- 커스텀 필드 기반 필터

### 2.5 대량 작업

- 다중 선택을 통한 일괄 삭제
- CSV 내보내기
- 대량 이메일 발송 대상 선택

## 3. 이메일 템플릿 시스템

### 3.1 개요

변수 치환과 조건부 렌더링을 지원하는 강력한 템플릿 엔진

### 3.2 템플릿 생성

#### 기본 템플릿 구조

```html
Subject: {{brandName}}에서 {{influencerName}}님께 드리는 제안 안녕하세요
{{influencerName}}님, {{brandName}}입니다. 귀하의 인스타그램 계정
@{{accountId}}를 통해 보여주신 콘텐츠에 깊은 인상을 받았습니다. {{#if
hasProduct}} 저희 신제품 {{productName}}의 협찬을 제안드리고 싶습니다. {{/if}}
감사합니다. {{senderName}} 드림
```

### 3.3 변수 시스템

#### 시스템 변수

- `{{influencerName}}`: 인플루언서 이름
- `{{email}}`: 인플루언서 이메일
- `{{accountId}}`: 인스타그램 계정 ID
- `{{brandName}}`: 브랜드명
- `{{senderName}}`: 발신자명
- `{{currentDate}}`: 현재 날짜

#### 사용자 정의 변수

```javascript
// 템플릿 생성 시 정의
{
  productName: "상품명",
  discount: "할인율",
  deadline: "마감일"
}

// 사용 예시
"{{productName}}을 {{discount}}% 할인된 가격에 제공합니다."
```

### 3.4 조건부 렌더링

#### IF 문법

```handlebars
{{#if hasProduct}}
  제품 협찬이 가능합니다.
{{/if}}

{{#if followers > 10000}}
  특별 혜택을 제공합니다.
{{/if}}
```

#### IF-ELSE 문법

```handlebars
{{#if category === 'fashion'}}
  패션 제품을 소개합니다.
{{else}}
  라이프스타일 제품을 소개합니다.
{{/if}}
```

### 3.5 템플릿 관리

#### 템플릿 저장

- 템플릿 이름 지정
- 카테고리 분류
- 활성/비활성 상태 설정

#### 템플릿 복제

- 기존 템플릿 기반 새 템플릿 생성
- 변수 및 조건 유지

#### 템플릿 프리뷰

- 실제 인플루언서 데이터로 미리보기
- 변수 치환 결과 확인

## 4. 이메일 발송 시스템

### 4.1 개요

Gmail과 MailPlug를 지원하는 듀얼 이메일 발송 시스템

### 4.2 이메일 발송 프로세스

#### 단일 발송

```javascript
1. Email Compose 페이지 이동
2. 템플릿 선택
3. 수신자(인플루언서) 선택
4. 변수 값 입력
5. 미리보기 확인
6. 발송
```

#### 대량 발송

```javascript
1. 템플릿 선택
2. 인플루언서 그룹 선택 (체크박스)
3. 공통 변수 설정
4. 개별 변수 설정 (선택사항)
5. 발송 예약 또는 즉시 발송
```

### 4.3 이메일 개인화

#### 인플루언서별 변수 치환

```javascript
// 템플릿
"안녕하세요 {{name}}님, {{category}} 분야에서...";

// 인플루언서 A
"안녕하세요 김철수님, 패션 분야에서...";

// 인플루언서 B
"안녕하세요 이영희님, 뷰티 분야에서...";
```

### 4.4 첨부파일 및 이미지

#### 파일 업로드

- 최대 파일 크기: 10MB
- 지원 형식: PDF, DOC, DOCX, XLS, XLSX, JPG, PNG
- Supabase Storage에 안전하게 저장

#### 인라인 이미지

- 이메일 본문에 이미지 삽입
- 자동 리사이징
- CDN을 통한 빠른 로딩

### 4.5 발송 추적

#### 발송 상태

- `PENDING`: 대기 중
- `SENT`: 발송 완료
- `FAILED`: 발송 실패

#### 발송 로그

```javascript
// 각 이메일별 기록
{
  to: "receiver@email.com",
  subject: "제목",
  sentAt: "2024-01-08 10:30:00",
  status: "SENT",
  messageId: "unique-id"
}
```

## 5. 이메일 수신함

### 5.1 개요

POP3/IMAP 프로토콜을 통한 이메일 수신 및 관리

### 5.2 이메일 수신 설정

#### POP3 설정 (Gmail)

```
서버: pop.gmail.com
포트: 995
보안: SSL/TLS
```

#### IMAP 설정 (Gmail)

```
서버: imap.gmail.com
포트: 993
보안: SSL/TLS
```

### 5.3 수신함 기능

#### 이메일 목록

- 발신자, 제목, 날짜 표시
- 읽음/안읽음 상태
- 페이지네이션

#### 이메일 상세 보기

- HTML/텍스트 본문 표시
- 첨부파일 다운로드
- 답장 기능

#### 인플루언서 매칭

- 발신자 이메일과 인플루언서 DB 자동 매칭
- 매칭된 경우 인플루언서 정보 표시

### 5.4 이메일 필터링

- 읽음/안읽음 필터
- 날짜 범위 필터
- 발신자 필터
- 키워드 검색

## 6. 설문조사 시스템

### 6.1 개요

인플루언서 피드백 수집을 위한 커스터마이즈 가능한 설문조사

### 6.2 설문조사 생성

#### 질문 유형

```javascript
// 지원되는 질문 타입
- TEXT: 단답형
- TEXTAREA: 서술형
- RADIO: 단일 선택
- CHECKBOX: 다중 선택
- SELECT: 드롭다운
- NUMBER: 숫자 입력
- DATE: 날짜 선택
- FILE: 파일 업로드
```

#### 설문 구조

```javascript
{
  title: "인플루언서 만족도 조사",
  description: "협업에 대한 의견을 들려주세요",
  questions: [
    {
      type: "RADIO",
      question: "전반적인 만족도는?",
      options: ["매우 만족", "만족", "보통", "불만족"],
      required: true
    },
    {
      type: "TEXTAREA",
      question: "개선사항을 알려주세요",
      required: false
    }
  ]
}
```

### 6.3 설문 배포

#### 개인별 링크 생성

```javascript
// 각 인플루언서별 고유 링크
https://app.com/survey/abc123-def456

// 링크 구조
- surveyId: 설문 ID
- linkRef: 인플루언서별 고유 코드
```

#### 이메일 통합

- 이메일 템플릿에 설문 링크 자동 삽입
- 원클릭 설문 참여

### 6.4 응답 수집 및 분석

#### 실시간 응답 확인

- 응답자 정보
- 응답 시간
- 개별 답변 내용

#### 통계 분석

- 질문별 응답 분포
- 평균값 계산 (숫자형 질문)
- 응답률 추적

## 7. 캠페인 블록 시스템

### 7.1 개요

재사용 가능한 콘텐츠 블록으로 효율적인 캠페인 관리

### 7.2 블록 타입

#### 정적 블록

```javascript
// 고정된 내용의 블록
{
  type: "STATIC",
  title: "회사 소개",
  content: "우리 회사는..."
}
```

#### 동적 블록

```javascript
// 입력 필드가 있는 블록
{
  type: "DYNAMIC",
  title: "제품 소개",
  inputType: "TEXT",
  placeholder: "제품명을 입력하세요"
}
```

### 7.3 블록 관리

#### 블록 생성

1. Campaign Blocks 메뉴 이동
2. "New Block" 클릭
3. 블록 정보 입력
4. 공개/비공개 설정

#### 블록 공유

- 공개 블록: 모든 사용자 사용 가능
- 비공개 블록: 본인만 사용 가능

### 7.4 블록 활용

- 이메일 템플릿에 블록 삽입
- 설문조사에 블록 추가
- 여러 캠페인에서 재사용

## 8. 대시보드

### 8.1 개요

주요 지표와 활동을 한눈에 확인할 수 있는 종합 대시보드

### 8.2 핵심 지표

#### 인플루언서 통계

- 총 인플루언서 수
- 카테고리별 분포
- 최근 추가된 인플루언서

#### 이메일 통계

- 발송된 이메일 수
- 응답률
- 열람률 (추후 구현)

#### 설문 통계

- 활성 설문 수
- 총 응답 수
- 평균 응답률

### 8.3 최근 활동

- 최근 발송 이메일
- 최근 수신 이메일
- 최근 설문 응답

### 8.4 빠른 액션

- 새 인플루언서 추가
- 이메일 작성
- 설문 생성

## 9. 파일 관리

### 9.1 파일 업로드

- Drag & Drop 지원
- 다중 파일 업로드
- 업로드 진행률 표시

### 9.2 파일 저장소

- Supabase Storage 활용
- 자동 백업
- CDN 배포

### 9.3 파일 관리

- 파일 목록 조회
- 파일 삭제
- 공유 링크 생성

## 10. 사용 팁

### 10.1 효율적인 인플루언서 관리

1. 카테고리와 태그를 활용한 체계적 분류
2. 커스텀 필드로 필요한 정보 추가
3. 정기적인 정보 업데이트

### 10.2 이메일 캠페인 최적화

1. A/B 테스트용 템플릿 변형 생성
2. 발송 시간대 테스트
3. 제목 라인 최적화

### 10.3 설문 응답률 향상

1. 짧고 명확한 질문 구성
2. 인센티브 제공 명시
3. 모바일 친화적 디자인

---

_마지막 업데이트: 2026-01-08_
